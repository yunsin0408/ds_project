<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>iSoogle Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    .row { margin-bottom: 12px; }
    button { margin-right: 8px; padding: 8px 12px; }
    input { width: 360px; padding: 8px; }
    pre { background: #f5f5f5; padding: 12px; overflow:auto; }
  </style>
</head>
<body>
  <h2>iSoogle Demo</h2>

  <div class="row">
    <input id="q" placeholder="Type keywords..." />
  </div>

  <div class="row">
    <button id="btnKeyword">Search (Keyword)</button>
    <button id="btnSemantic">Search (Semantic)</button>
  </div>

  <div class="row">
    <div id="status"></div>
  </div>

  <pre id="out"></pre>

<script>
  async function runSearch(mode) {
    const q = document.getElementById("q").value.trim();
    if (!q) return alert("Please enter keywords");

    const status = document.getElementById("status");
    const out = document.getElementById("out");

    status.textContent = "Loading...";
    out.textContent = "";

    const url = `/api/search?q=${encodeURIComponent(q)}&mode=${encodeURIComponent(mode)}`;

    try {
      const resp = await fetch(url);
      if (!resp.ok) {
        status.textContent = `Error: ${resp.status}`;
        return;
      }

      const data = await resp.json();
      status.textContent = `OK (mode=${data.mode}, count=${data.count})`;
      out.textContent = JSON.stringify(data, null, 2);
    } catch (e) {
      status.textContent = "Request failed";
      out.textContent = String(e);
    }
  }

  document.getElementById("btnKeyword")
    .addEventListener("click", () => runSearch("keyword"));

  document.getElementById("btnSemantic")
    .addEventListener("click", () => runSearch("semantic"));
</script>

</body>
</html>
